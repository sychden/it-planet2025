<div class="create-event-container">
    <form [formGroup]="eventForm" (ngSubmit)="onSubmit()" class="event-form">
      <h1>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h1>
  
      <!-- –ë–ª–æ–∫ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º -->
      <div class="image-section">
        <div class="image-upload">
          <img [src]="imagePreview || '/assets/event-placeholder.png'" 
               alt="–ü—Ä–µ–≤—å—é –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è" 
               class="image-preview">
          <label class="upload-label form-label">
            <input type="file" 
                   accept="image/*" 
                   (change)="onImageChange($event)" 
                   hidden
                   class="input-form">
            üìé –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
          </label>
          <div *ngIf="eventForm.get('image')?.invalid && eventForm.get('image')?.touched" 
               class="error">
            –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
          </div>
        </div>
      </div>
  
      <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è -->
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</label>
          <input type="text" 
                 formControlName="title" 
                 placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ">
          <div *ngIf="eventForm.get('title')?.invalid && eventForm.get('title')?.touched" 
               class="error">
            –ú–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞
          </div>
        </div>
  
        <div class="form-group">
          <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
          <select formControlName="category">
            <option value="" disabled>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
            <option *ngFor="let category of categories" [value]="category">
              {{ category }}
            </option>
          </select>
          <div *ngIf="eventForm.get('category')?.invalid && eventForm.get('category')?.touched" 
               class="error">
            –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
          </div>
        </div>
      </div>
  
      <div class="form-group">
        <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
        <textarea formControlName="description" 
                  placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è"
                  rows="5" class="input-form"></textarea>
        <div *ngIf="eventForm.get('description')?.invalid && eventForm.get('description')?.touched" 
             class="error">
          –ú–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤
        </div>
      </div>
  
      <!-- –§–æ—Ä–º–∞—Ç –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è -->
      <div class="form-group">
        <label class="form-label">–§–æ—Ä–º–∞—Ç –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</label>
        <div class="radio-group">
          <label>
            <input type="radio" 
                   formControlName="offline" 
                   [value]="true">
            –û—Ñ–ª–∞–π–Ω
          </label>
          <label>
            <input type="radio" 
                   formControlName="offline" 
                   [value]="false">
            –û–Ω–ª–∞–π–Ω
          </label>
        </div>
      </div>
  
      <!-- –ê–¥—Ä–µ—Å (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ñ–ª–∞–π–Ω) -->
      <div class="form-group" *ngIf="eventForm.get('offline')?.value">
        <label class="form-label">–ê–¥—Ä–µ—Å –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è*</label>
        <input type="text" 
               formControlName="address" 
               placeholder="–£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å" class="input-form">
        <div *ngIf="eventForm.get('address')?.invalid && eventForm.get('address')?.touched" 
             class="error">
          –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å
        </div>
      </div>
  
      <!-- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è -->
      <div class="form-group">
        <label class="form-label">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è*</label>
        <input type="datetime-local" 
               formControlName="date" class="input-form">
        <div *ngIf="eventForm.get('date')?.invalid && eventForm.get('date')?.touched" 
             class="error">
          –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É
        </div>
      </div>
  
      <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
      <div class="form-group">
        <label class="form-label">–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Å–≤—è–∑–∏*</label>
        <input type="text" 
               formControlName="contacts" 
               placeholder="Email/—Ç–µ–ª–µ—Ñ–æ–Ω/—Å–æ—Ü—Å–µ—Ç–∏" class="input-form">
        <div *ngIf="eventForm.get('contacts')?.invalid && eventForm.get('contacts')?.touched" 
             class="error">
          –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã
        </div>
      </div>
  
      <!-- –¢–µ–≥–∏ -->
      <div class="form-group">
        <label class="form-label">–¢–µ–≥–∏</label>
        <div class="tags-container">
          <div *ngFor="let tag of tags" 
               class="tag" 
               [class.selected]="selectedTags.includes(tag)"
               (click)="toggleTag(tag)">
            {{ tag }}
          </div>
        </div>
      </div>
  
      <!-- –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä -->
      <div class="organizer-info" *ngIf="organizerProfile">
        <h3>–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä</h3>
        <div class="organizer-card">
          <img [src]="organizerProfile.avatarUrl || '/assets/imgs/accountIcon.png'" 
               alt="–ê–≤–∞—Ç–∞—Ä –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞" 
               class="organizer-avatar">
          <div class="organizer-details">
            <h4>{{ organizerProfile.name }}</h4>
            <p>{{ organizerProfile.email }}</p>
          </div>
        </div>
      </div>
  
      <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
      <button type="submit" 
              [disabled]="eventForm.invalid || isLoading" 
              class="btn-style2 courier_new_normal">
        {{ isLoading ? '–°–æ–∑–¥–∞–Ω–∏–µ...' : '–°–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ' }}
      </button>
    </form>
  </div>